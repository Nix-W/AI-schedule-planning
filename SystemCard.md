# AI 日程规划系统 - System Card

## 项目名称
AI 日程规划系统（AI Schedule Planning）

**线上地址**：https://ai-schedule-planning-vtao.vercel.app/

---

### 1. 这个系统是干什么的？

让用户用自然语言描述任务，AI 自动解析并生成可视化日历视图。

例如输入「明天下午3点和老王在星巴克讨论项目」，系统自动创建一个日程：时间明天15:00-16:00，地点星巴克，参与者老王。

---

### 2. 它需要什么输入？

| 输入类型 | 格式 | 示例 |
|----------|------|------|
| 自然语言文本 | 中文句子 | "明天下午3点开会" |
| | | "每周一早上9点站会，30分钟" |
| | | "下周五全天休假" |
| | | "后天晚上8点到10点看电影" |

**支持的时间表达**：
- 相对日期：今天、明天、后天、下周X、下个月X号
- 时间段：上午、中午、下午、晚上
- 具体时间：X点、X点半
- 时间范围：X点到X点
- 重复规则：每天、每周X、每月X号、工作日

**支持提取的信息**：
- 事件标题
- 开始/结束时间
- 地点（"在XXX"）
- 参与者（"和XXX"）
- 事件类型（会议/任务/提醒/个人）
- 重复规则

---

### 3. 它怎么处理的？

```
用户输入自然语言
      ↓
【解析模块】
正则表达式匹配时间、地点、参与者等关键词
提取结构化数据（JSON格式）
计算置信度（0-1）
      ↓
【预览确认】
显示解析结果供用户确认
低置信度时显示警告
检测与现有日程的时间冲突
      ↓
【用户确认】
用户可修改后确认，或取消
      ↓
【存储模块】
保存到浏览器 localStorage
重复日程展开为多个实例
      ↓
【渲染模块】
日历组件读取事件数组
按时间位置渲染到月/周/日视图
不同类型用不同颜色区分
      ↓
【提醒模块】
定时检查即将开始的事件
通过浏览器通知提醒用户
```

**核心数据流**：
```
自然语言 → 结构化JSON → 日历事件对象 → 可视化渲染
```

---

### 4. 它不能做什么？

| 限制 | 说明 |
|------|------|
| **复杂时间格式** | 不能识别「3点45分」「15:30」「三点一刻」等精确分钟格式 |
| **模糊时间推理** | 不能理解「下班后」「吃完饭」「有空的时候」 |
| **上下文理解** | 不能理解「和上次一样的时间」「老地方」 |
| **多语言** | 仅支持中文，不支持英文或其他语言 |
| **智能冲突处理** | 只能警告冲突，不能自动建议替代时间 |
| **跨设备同步** | 数据存在浏览器本地，换设备或清除缓存会丢失 |
| **真正的 AI 能力** | 目前使用正则模拟解析，非真正的 AI 理解 |
| **日历导入** | 只能导出 .ics，不能导入外部日历文件 |
| **多用户协作** | 单用户本地使用，不支持团队共享日程 |
| **移动端适配** | 基础响应式，但移动端体验未专门优化 |

---

### 5. 下一步可以怎么改进？

如果再给两周时间，按优先级排序：

**第一周：核心能力提升**

| 改进 | 价值 | 工作量 |
|------|------|--------|
| **接入真实 AI API（Claude/OpenAI）** | 解析能力大幅提升，支持任意自然语言 | 0.5天 |
| **支持更多时间格式** | 修复「3点45分」等格式无法识别的问题 | 接入AI后自动解决 |
| **云端数据同步** | 接入数据库，跨设备访问 | 2天 |
| **用户账号系统** | 登录后数据跟随账号 | 2天 |

**第二周：体验优化**

| 改进 | 价值 | 工作量 |
|------|------|--------|
| **Google Calendar 同步** | 与现有日历生态打通 | 2天 |
| **智能时间建议** | 冲突时自动推荐空闲时段 | 1天 |
| **移动端 PWA** | 可安装到手机桌面，离线使用 | 1天 |
| **语音输入** | 说话创建日程，更自然 | 1天 |
| **周报/统计** | 显示本周会议时长、空闲时间分析 | 1天 |

**最优先做的一件事**：
> 接入真实 AI API —— 这是从「能用」到「好用」的关键一步，能解决目前大部分解析限制。

---

## 技术栈

| 层面 | 技术 |
|------|------|
| 前端框架 | Next.js 16 + React 18 + TypeScript |
| 样式 | Tailwind CSS |
| 日历组件 | react-big-calendar |
| 时间处理 | date-fns |
| 数据存储 | localStorage |
| 部署 | Vercel |

---

## 项目结构

```
ai-calendar/
├── src/
│   ├── app/
│   │   ├── api/parse-event/    # 解析 API
│   │   ├── page.tsx            # 主页面
│   │   └── globals.css
│   ├── components/
│   │   ├── Calendar.tsx        # 日历组件
│   │   ├── EventInput.tsx      # 输入框
│   │   ├── EventPreview.tsx    # 预览弹窗
│   │   ├── EventModal.tsx      # 详情/编辑弹窗
│   │   ├── SearchBar.tsx       # 搜索
│   │   └── QuickTemplates.tsx  # 快捷模板
│   ├── lib/
│   │   ├── storage.ts          # 本地存储
│   │   ├── conflict.ts         # 冲突检测
│   │   ├── reminder.ts         # 提醒功能
│   │   └── ics-export.ts       # 导出 ics
│   └── types/
│       └── calendar.ts         # 类型定义
└── package.json
```
